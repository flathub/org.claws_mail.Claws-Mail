{
  "app-id": "org.claws_mail.Claws-Mail",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "21.08",
  "sdk": "org.freedesktop.Sdk",
  "command": "/app/bin/claws-mail",
  "finish-args": [
    "--share=ipc",
    "--share=network",
    "--socket=x11",
    "--socket=wayland",
    "--talk-name=org.freedesktop.Notifications",
    "--filesystem=home",
    "--filesystem=xdg-run/gnupg:ro"
  ],
  "modules": [
    {
      "name": "libetpan",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/dinhvh/libetpan/archive/80f0f515555de2798c6984db507d406d0153f1f5.zip",
          "sha256": "0e6b6d08721df3c8f0036547e963d313d6a130cefe881c8e12f6dc46b347a68f"
        }
      ],
      "cleanup": [
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "ytnef",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/Yeraze/ytnef/archive/v1.9.3.tar.gz",
          "sha256": "41a0033bde33c86a7e4aa4e14bb822dd03084098638e7d6557263e47e80b4f4f"
        }
      ],
      "cleanup": [
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "libopenjpeg",
      "buildsystem": "cmake-ninja",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/uclouvain/openjpeg/archive/refs/tags/v2.4.0.tar.gz",
          "sha256": "8702ba68b442657f11aaeb2b338443ca8d5fb95b0d845757968a7be31ef7f16d"
        }
      ],
      "cleanup": [
        "/lib/pkgconfig",
        "/lib/openjpeg-*",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "libpoppler-glib",
      "buildsystem": "cmake-ninja",
      "config-opts": [
          "-DENABLE_BOOST=OFF"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://gitlab.freedesktop.org/poppler/poppler/-/archive/poppler-21.09.0/poppler-poppler-21.09.0.tar.bz2",
          "sha256": "6de996a2d3ea967afedf784f7d072047f30b53ddd951cdf6d4d1f2bc5bd6301a"
        }
      ],
      "cleanup": [
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "libical",
      "buildsystem": "cmake-ninja",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/libical/libical/releases/download/v3.0.10/libical-3.0.10.tar.gz",
          "sha256": "f933b3e6cf9d56a35bb5625e8e4a9c3a50239a85aea05ed842932c1a1dc336b4"
        }
      ],
      "cleanup": [
        "/libexec",
        "/lib/pkgconfig",
        "/lib/cmake",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "libgumbo",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/google/gumbo-parser/archive/v0.10.1.tar.gz",
          "sha256": "28463053d44a5dfbc4b77bcf49c8cee119338ffa636cc17fc3378421d714efad"
        }
      ],
      "cleanup": [
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "liboauth",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/x42/liboauth/archive/186fb14843c1bc98b70ece02c74b5696b3de9ce7.zip",
          "sha256": "5d7a197cf56a7964efc37814b0121806972898e0cdf4fddab6e74249acf6fc83"
        },
        {
          "type": "script",
          "commands": [
            "autoreconf -fi"
          ]
        }
      ],
      "cleanup": [
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "libuhttpmock",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "archive",
          "url": "https://gitlab.com/uhttpmock/uhttpmock/-/archive/0.5.3/uhttpmock-0.5.3.tar.gz",
          "sha256": "17902a5bca494ec1fa2cbade1fde1be5387e4024fef63b3fc8dd555294233b13"
        }
      ],
      "cleanup": [
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "graphviz",
      "buildsystem": "autotools",
      "config-opts": [],
      "sources": [
        {
          "type": "archive",
          "url": "https://gitlab.com/graphviz/graphviz/-/archive/2.48.0/graphviz-2.48.0.tar.bz2",
          "sha256": "6ba7b075c3820e7a40fbc8879ad25621f65a6f5fec79e41c7987650ac3f727ae"
        }
      ],
      "cleanup": [
        "/libexec",
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "vala",
      "buildsystem": "autotools",
      "config-opts": [],
      "sources": [
        {
          "type": "archive",
          "url": "https://download-fallback.gnome.org/sources/vala/0.52/vala-0.52.4.tar.xz",
          "sha256": "ecde520e5160e659ee699f8b1cdc96065edbd44bbd08eb48ef5f2506751fdf31"
        }
      ],
      "cleanup": [
        "/libexec",
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "libgdata",
      "buildsystem": "meson",
      "config-opts": [
        "-Dgoa=disabled",
        "-Dgnome=disabled",
        "-Dgtk_doc=false"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://gitlab.gnome.org/GNOME/libgdata/-/archive/0.18.1/libgdata-0.18.1.tar.bz2",
          "sha256": "ed1e39db87914344cb8f1ab0d0f320aa662848816c466b879f75f46854439545"
        }
      ],
      "cleanup": [
        "/libexec",
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "bogofilter",
      "buildsystem": "autotools",
      "config-opts": [
        "--disable-rpath",
        "--with-database=sqlite3"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://git.code.sf.net/p/bogofilter/git",
          "branch": "75ef6fc25d7055321e3e7c3719732eb2fbcb9c6a"
        },
        {
          "type": "script",
          "dest-filename": "autogen.sh",
          "commands": [
            "rm -rf README web",
            "(shopt -s dotglob; mv bogofilter/* .)",
            "echo \"# Skip for Flatpak build\" > doc/Makefile.am",
            "autoreconf -fi"
          ]
        }
      ],
      "cleanup": [
      ]
    },
    {
      "name": "claws-mail",
      "buildsystem": "autotools",
      "config-opts": [
        "--enable-tnef_parse-plugin",
        "--enable-pdf_viewer-plugin",
        "--enable-vcalendar-plugin",
        "--enable-litehtml_viewer-plugin",
        "--enable-gdata-plugin",
        "--enable-bogofilter-plugin",
        "--disable-perl-plugin",
        "--disable-dillo-plugin",
        "--disable-bsfilter-plugin"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://claws-mail.org/releases/claws-mail-4.0.0.tar.xz",
          "sha256": "4af2bd26a5d91eacb2a9c09f67a6a46c2222b40817c1f525dc050bdc7b0ee475"
        }
      ],
      "cleanup": [
        "/lib/pkgconfig",
        "/include",
        "*.a",
        "*.la"
      ]
    },
    {
      "name": "claws-mail-post-install",
      "buildsystem": "simple",
      "build-commands": [
        "install -Dm644 org.claws_mail.Claws-Mail.appdata.xml /app/share/metainfo/org.claws_mail.Claws-Mail.appdata.xml",
        "install -Dm644 org.claws_mail.Claws-Mail.desktop /app/share/applications/org.claws_mail.Claws-Mail.desktop",
        "install -Dm644 claws-mail-48x48.png /app/share/icons/hicolor/48x48/apps/org.claws_mail.Claws-Mail.png",
        "install -Dm644 claws-mail-64x64.png /app/share/icons/hicolor/64x64/apps/org.claws_mail.Claws-Mail.png",
        "install -Dm644 claws-mail-128x128.png /app/share/icons/hicolor/128x128/apps/org.claws_mail.Claws-Mail.png"
      ],
      "sources": [
        {
          "type": "file",
          "path": "org.claws_mail.Claws-Mail.appdata.xml"
        },
        {
          "type": "file",
          "path": "static/org.claws_mail.Claws-Mail.desktop"
        },
        {
          "type": "file",
          "path": "static/claws-mail-48x48.png"
        },
        {
          "type": "file",
          "path": "static/claws-mail-64x64.png"
        },
        {
          "type": "file",
          "path": "static/claws-mail-128x128.png"
        }
      ]
    }
  ]
}
